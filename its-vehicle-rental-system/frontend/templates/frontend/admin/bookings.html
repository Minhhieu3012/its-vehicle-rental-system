{% extends 'frontend/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'frontend/css/admin.css' %}">
<style>
    /* CSS bổ sung để đảm bảo bảng không bị dính sát */
    .admin-table-container {
        background: white;
        border-radius: 0.75rem;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        overflow: hidden;
        border: 1px solid #e2e8f0;
        margin-top: 1.5rem;
    }

    .admin-table thead {
        background-color: #f8fafc;
        border-bottom: 2px solid #e2e8f0;
    }

    .admin-table th {
        padding: 1rem 1.5rem !important;
        font-weight: 700 !important;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.05em;
        color: #475569;
    }

    .admin-table td {
        padding: 1rem 1.5rem !important;
        vertical-align: middle;
        border-bottom: 1px solid #f1f5f9;
    }

    .admin-table tr:hover {
        background-color: #f8fafc;
    }

    .badge-custom {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 700;
    }

    .badge-pending {
        background-color: #dbeafe;
        color: #1e40af;
    }

    .badge-approved {
        background-color: #dcfce7;
        color: #166534;
    }

    .badge-completed {
        background-color: #f1f5f9;
        color: #475569;
    }
</style>
{% endblock %}

{% block content %}
<div class="admin-wrapper">
    <aside class="admin-sidebar">
        <ul>
            <li><a href="{% url 'frontend:admin_dashboard' %}">Dashboard</a></li>
            <li><a href="{% url 'frontend:admin_vehicles' %}">Quản lý Xe</a></li>
            <li><a href="{% url 'frontend:admin_bookings' %}" class="active">Quản lý Đặt chỗ</a></li>
            <li><a href="{% url 'frontend:admin_stats' %}">Thống kê</a></li>
        </ul>
    </aside>

    <main class="admin-content" style="padding: 2rem;">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold text-slate-800">Quản lý Đặt chỗ</h1>
        </div>

        <div class="admin-table-container">
            <table class="table admin-table w-full text-left border-collapse">
                <thead>
                    <tr>
                        <th>Khách hàng</th>
                        <th>Phương tiện</th>
                        <th>Ngày trả</th>
                        <th>Trạng thái</th>
                        <th class="text-center">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    {% for booking in bookings %}
                    <tr>
                        <td>
                            <div class="font-bold text-slate-900">{{ booking.customer.username }}</div>
                            <div class="text-xs text-slate-500">ID đơn: #{{ booking.id }}</div>
                        </td>
                        <td>
                            <div class="font-medium text-slate-700">{{ booking.vehicle.name }}</div>
                        </td>
                        <td>
                            <div class="text-sm text-slate-600">{{ booking.end_date|date:"d/m/Y" }}</div>
                        </td>
                        <td>
                            <span class="badge-custom badge-{{ booking.status|lower }}">
                                {{ booking.get_status_display }}
                            </span>
                        </td>
                        <td class="text-center">
                            {% if booking.status == 'pending' %}
                            <a href="{% url 'frontend:approve_order' booking.id %}"
                               class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-sm inline-block">
                                Duyệt đơn
                            </a>
                            {% else %}
                            <span class="text-slate-400 text-xs italic">Đã xử lý</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center" style="padding: 4rem !important;">
                            <div class="flex flex-col items-center">
                                <span class="material-symbols-outlined text-5xl text-slate-300 mb-2">assignment_late</span>
                                <p class="text-slate-500 font-medium">Hiện tại chưa có đơn đặt chỗ nào trong hệ thống.</p>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </main>
</div>
{% endblock %}