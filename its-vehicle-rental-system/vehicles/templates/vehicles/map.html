{% load static %}
<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ITS Map Module</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css"
    />

    <link rel="stylesheet" href="{% static 'vehicles/css/map_style.css' %}" />
  </head>

  <body>
    <div id="map"></div>

    <div id="routeModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ“ Chi tiáº¿t lá»™ trÃ¬nh</h3>
          <span class="close-btn" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
          <div id="route-summary" class="summary-box">Äang táº£i...</div>
          <h4>HÆ°á»›ng dáº«n di chuyá»ƒn:</h4>
          <ul id="route-instructions" class="instruction-list"></ul>
        </div>
        <div class="modal-footer">
          <button class="btn-cancel" onclick="closeModal()">ÄÃ³ng</button>
        </div>
      </div>
    </div>

    <div id="termsModal" class="modal-overlay">
      <div class="modal-content modal-lg">
        <div class="modal-header header-dark">
          <h3>ğŸ“œ ÄIá»€U KHOáº¢N & CHÃNH SÃCH THUÃŠ XE</h3>
          <span class="close-btn text-white" onclick="closeTermsModal()"
            >&times;</span
          >
        </div>
        <div class="modal-body scrollable-body">
          <div class="term-highlight-box">
            <div>
              <span class="text-label">Äang xem chÃ­nh sÃ¡ch cho xe:</span>
              <h3 id="term-car-name" class="text-success">TÃªn xe...</h3>
            </div>
            <div class="text-right">
              <span class="text-label">ÄÆ¡n giÃ¡ tiÃªu chuáº©n:</span>
              <strong id="term-car-price" class="text-danger">0Ä‘/ngÃ y</strong>
            </div>
          </div>

          <div class="policy-content">
            <h5 class="policy-title">1. GIÃ THUÃŠ</h5>
            <ul class="policy-list">
              <li>GiÃ¡ thuÃª theo tá»«ng loáº¡i xe. TÃ­nh theo ngÃ y (24h).</li>
              <li>
                <strong>Tráº£ xe trá»…:</strong> DÆ°á»›i 1h miá»…n phÃ­, 1-3h +200k, >3h
                tÃ­nh 1 ngÃ y.
              </li>
            </ul>
            <div class="policy-note">
              <strong>LÆ¯U Ã:</strong> Äá»c ká»¹ Ä‘iá»u khoáº£n trÆ°á»›c khi thuÃª.<br />
              Hotline: 0909.xxx.xxx - Email: hotro@thuexeits.vn
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-cancel bg-dark" onclick="closeTermsModal()">
            ÄÃ£ hiá»ƒu & Äá»“ng Ã½
          </button>
        </div>
      </div>
    </div>

    <div id="locationModal" class="modal-overlay">
      <div class="modal-content modal-md">
        <div class="modal-header header-info">
          <h3>ğŸ“ ThÃ´ng tin Ä‘á»‹a Ä‘iá»ƒm</h3>
          <span class="close-btn text-white" onclick="closeLocationModal()"
            >&times;</span
          >
        </div>
        <div class="modal-body p-20">
          <h4 id="loc-car-name" class="loc-title">TÃªn xe...</h4>
          <div class="mt-15">
            <p>
              <strong>ğŸ  Äá»‹a chá»‰ láº¥y xe:</strong><br />
              <span class="loc-address"
                >123 Nguyá»…n VÄƒn Linh, P. TÃ¢n PhÃº, Q.7, TP.HCM</span
              >
            </p>
            <p><strong>ğŸ• Giá» má»Ÿ cá»­a:</strong> <b>7:00 - 22:00</b></p>
            <p>
              <strong>ğŸ“ LiÃªn há»‡:</strong>
              <a href="tel:0901234567" class="phone-link">090 123 4567</a>
            </p>
          </div>
        </div>
        <div class="modal-footer flex-end">
          <button id="btn-view-map" class="btn-cancel flex-1">
            ğŸ” Xem báº£n Ä‘á»“
          </button>
          <button id="btn-start-route" class="btn-confirm flex-1">
            â†—ï¸ Chá»‰ Ä‘Æ°á»ng
          </button>
        </div>
      </div>
    </div>

    {{ vehicles_json|json_script:"vehicles-data" }}

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <script src="{% static 'vehicles/js/map_logic.js' %}"></script>
  </body>
</html>
