{% load static %}
<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ITS Map Module</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css"
    />

    <link rel="stylesheet" href="{% static 'vehicles/css/map_style.css' %}" />
  </head>

  <body>
    <div id="map"></div>

    <div id="routeModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h3>üìç Chi ti·∫øt l·ªô tr√¨nh</h3>
          <span class="close-btn" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
          <div id="route-summary" class="summary-box">ƒêang t·∫£i...</div>
          <h4>H∆∞·ªõng d·∫´n di chuy·ªÉn:</h4>
          <ul id="route-instructions" class="instruction-list"></ul>
        </div>
        <div class="modal-footer">
          <button class="btn-cancel" onclick="closeModal()">ƒê√≥ng</button>
        </div>
      </div>
    </div>

    <div id="termsModal" class="modal-overlay">
      <div class="modal-content modal-lg">
        <div class="modal-header header-dark">
          <h3>üìú ƒêI·ªÄU KHO·∫¢N & CH√çNH S√ÅCH THU√ä XE</h3>
          <span class="close-btn text-white" onclick="closeTermsModal()"
            >&times;</span
          >
        </div>

        <div class="modal-body scrollable-body">
          <div class="term-highlight-box">
            <div>
              <span class="text-label">ƒêang xem ch√≠nh s√°ch cho xe:</span>
              <h3 id="term-car-name" class="text-success">T√™n xe...</h3>
            </div>
            <div class="text-right">
              <span class="text-label">ƒê∆°n gi√° ti√™u chu·∫©n:</span>
              <strong id="term-car-price" class="text-danger">0ƒë/ng√†y</strong>
            </div>
          </div>

          <div class="policy-content">
            <h5 class="policy-title">1. GI√Å THU√ä</h5>
            <ul class="policy-list">
              <li>Gi√° thu√™ t√≠nh theo ng√†y (24 gi·ªù k·ªÉ t·ª´ khi nh·∫≠n xe).</li>
              <li>
                <strong>Tr·∫£ xe tr·ªÖ:</strong>
                <ul>
                  <li>D∆∞·ªõi 1 gi·ªù: Mi·ªÖn ph√≠</li>
                  <li>T·ª´ 1-3 gi·ªù: +200.000ƒë</li>
                  <li>Tr√™n 3 gi·ªù: T√≠nh th√™m 1 ng√†y thu√™</li>
                </ul>
              </li>
            </ul>

            <h5 class="policy-title">2. NHI√äN LI·ªÜU</h5>
            <ul class="policy-list">
              <li>Kh√°ch t·ª± t√∫c chi ph√≠ xƒÉng/ƒëi·ªán.</li>
              <li><strong>Giao xe:</strong> ƒê·∫ßy b√¨nh/Pin ƒë·∫ßy.</li>
              <li>
                <strong>Tr·∫£ xe:</strong> Vui l√≤ng tr·∫£ ƒë·∫ßy b√¨nh (ho·∫∑c thanh to√°n
                ph√≠ nhi√™n li·ªáu thi·∫øu theo gi√° th·ªã tr∆∞·ªùng).
              </li>
            </ul>

            <h5 class="policy-title">3. QU√ÉNG ƒê∆Ø·ªúNG</h5>
            <ul class="policy-list">
              <li>Kh√¥ng gi·ªõi h·∫°n km trong l√£nh th·ªï Vi·ªát Nam.</li>
              <li>
                ƒêi ngo√†i t·ªânh/th√†nh ph·ªë n∆°i nh·∫≠n xe:
                <strong>Vui l√≤ng b√°o tr∆∞·ªõc</strong>.
              </li>
              <li>‚ùå <strong>Kh√¥ng cho ph√©p</strong> ƒë∆∞a xe ra n∆∞·ªõc ngo√†i.</li>
            </ul>

            <h5 class="policy-title">4. TI·ªÄN C·ªåC & GI·∫§Y T·ªú</h5>
            <ul class="policy-list">
              <li>
                <strong>Ti·ªÅn c·ªçc (Ho·∫∑c gi·ªØ gi·∫•y t·ªù g·ªëc):</strong>
                <ul>
                  <li>Xe m√°y: 3 - 5 tri·ªáu ƒë·ªìng.</li>
                  <li>√î t√¥: 15 - 30 tri·ªáu ƒë·ªìng (t√πy d√≤ng xe).</li>
                </ul>
              </li>
              <li>
                <strong>Gi·∫•y t·ªù b·∫Øt bu·ªôc:</strong> CCCD g·∫Øn chip (b·∫£n g·ªëc) +
                GPLX h·ª£p l·ªá.
              </li>
            </ul>

            <h5 class="policy-title">5. ƒêI·ªÄU KI·ªÜN THU√ä XE</h5>
            <ul class="policy-list">
              <li>
                <strong>ƒê·ªô tu·ªïi:</strong> T·ª´ 18 tu·ªïi (xe m√°y), t·ª´ 23 tu·ªïi (√¥
                t√¥).
              </li>
              <li>
                <strong>Kinh nghi·ªám l√°i:</strong> GPLX c√≥ th√¢m ni√™n t·ªëi thi·ªÉu 1
                nƒÉm.
              </li>
              <li>Kh√¥ng s·ª≠ d·ª•ng ch·∫•t k√≠ch th√≠ch khi nh·∫≠n xe.</li>
            </ul>

            <h5 class="policy-title">6. B·∫¢O HI·ªÇM & TR√ÅCH NHI·ªÜM</h5>
            <ul class="policy-list">
              <li>Xe ƒë√£ c√≥ b·∫£o hi·ªÉm TNDS b·∫Øt bu·ªôc.</li>
              <li>
                <strong>S·ª± c·ªë va qu·∫πt:</strong> Kh√°ch h√†ng ch·ªãu chi ph√≠ s·ª≠a ch·ªØa
                th·ª±c t·∫ø.
              </li>
              <li>
                <strong>S·ª± c·ªë l·ªõn/M·∫•t c·∫Øp:</strong> Kh√°ch h√†ng b·ªìi th∆∞·ªùng theo
                quy ƒë·ªãnh ph√°p lu·∫≠t v√† h·ª£p ƒë·ªìng b·∫£o hi·ªÉm.
              </li>
            </ul>

            <h5 class="policy-title" style="color: #dc3545">
              7. C·∫§M NGHI√äM üö´
            </h5>
            <ul class="policy-list" style="color: #dc3545">
              <li>
                ‚ùå S·ª≠ d·ª•ng xe v√†o m·ª•c ƒë√≠ch phi ph√°p (v·∫≠n chuy·ªÉn h√†ng c·∫•m, ƒëua
                xe...).
              </li>
              <li>‚ùå C·∫ßm c·ªë, th·∫ø ch·∫•p xe.</li>
              <li>‚ùå Ch·ªü qu√° s·ªë ng∆∞·ªùi quy ƒë·ªãnh.</li>
              <li>
                <strong
                  >Vi ph·∫°m = T·ªãch thu c·ªçc + B·ªìi th∆∞·ªùng + X·ª≠ l√Ω ph√°p l√Ω.</strong
                >
              </li>
            </ul>

            <h5 class="policy-title">8. HO√ÄN H·ª¶Y</h5>
            <ul class="policy-list">
              <li>H·ªßy tr∆∞·ªõc 24h: Ho√†n 100% c·ªçc.</li>
              <li>H·ªßy t·ª´ 12-24h: Ho√†n 50% c·ªçc.</li>
              <li>H·ªßy d∆∞·ªõi 12h: Kh√¥ng ho√†n c·ªçc.</li>
            </ul>

            <div class="policy-note">
              <strong>L∆ØU √ù:</strong> ƒê·ªçc k·ªπ ƒëi·ªÅu kho·∫£n tr∆∞·ªõc khi thu√™. Gi·ªØ g√¨n
              xe nh∆∞ xe c·ªßa m√¨nh.<br />
              <div style="margin-top: 5px">
                üìû Hotline h·ªó tr·ª£ 24/7: <strong>0909.xxx.xxx</strong> | ‚úâÔ∏è
                Email: <strong>hotro@thuexeits.vn</strong>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn-cancel bg-dark" onclick="closeTermsModal()">
            ƒê√£ hi·ªÉu & ƒê·ªìng √Ω
          </button>
        </div>
      </div>
    </div>

    <div id="locationModal" class="modal-overlay">
      <div class="modal-content modal-md">
        <div class="modal-header header-info">
          <h3>üìç Th√¥ng tin ƒë·ªãa ƒëi·ªÉm</h3>
          <span class="close-btn text-white" onclick="closeLocationModal()"
            >&times;</span
          >
        </div>
        <div class="modal-body p-20">
          <h4 id="loc-car-name" class="loc-title">T√™n xe...</h4>
          <div class="mt-15">
            <p>
              <strong>üè† ƒê·ªãa ch·ªâ l·∫•y xe:</strong><br />
              <span class="loc-address"
                >123 Nguy·ªÖn VƒÉn Linh, P. T√¢n Ph√∫, Q.7, TP.HCM</span
              >
            </p>
            <p><strong>üïê Gi·ªù m·ªü c·ª≠a:</strong> <b>7:00 - 22:00</b></p>
            <p>
              <strong>üìû Li√™n h·ªá:</strong>
              <a href="tel:0901234567" class="phone-link">090 123 4567</a>
            </p>
          </div>
        </div>
        <div class="modal-footer flex-end">
          <button id="btn-view-map" class="btn-cancel flex-1">
            üîç Xem b·∫£n ƒë·ªì
          </button>
          <button id="btn-start-route" class="btn-confirm flex-1">
            ‚ÜóÔ∏è Ch·ªâ ƒë∆∞·ªùng
          </button>
        </div>
      </div>
    </div>

    {{ vehicles_json|json_script:"vehicles-data" }}

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <script src="{% static 'vehicles/js/map_logic.js' %}"></script>
  </body>
</html>
